<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/efd33a6a78.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">

        <div id="list-item" class="list-item">
            
        </div>

    <div class="right-container">
        <form action="#" id="main-form">
            <div class="main-form__input">
                <label for="name">Name</label>
                <input type="text" name="name" placeholder="Enter your name" id="name" required/>
            </div>

            <div class="main-form__input">
                <label for="name">Address</label>
                <input type="text" name="address" placeholder="Enter your address" id="address" required/>
            </div>

            
            <div class="main-form__input">
                <label for="">Phone</label>
                <input type="number" placeholder="Enter your Phone" id="phone" required>
            </div>

            <div class="main-form__input">
                <label for="">Email</label>
                <input type="email" placeholder="Enter your Email" id="email" required>
            </div>

            <div class="main-form__input">
                <label for="">Age</label>
                <input type="number" min="18" max="90" placeholder="Enter your age" id="age" required>
            </div>

            <div class="main-form__input">
                <label for="">Which option is your current job?</label>
                <select id="selectOption" name="" class="select-menu" required>
                    <option value="" disabled selected>Select current job</option>
                    <option value="1">Student</option>
                    <option value="2">Software developer</option>
                    <option value="3">Web-fullstack developer</option>
                    <option value="4">Software engineer</option>
                </select>
            </div>

            
                <button type="submit" id="submit" class="submit-button" onclick="submitClickHandle()">
                  Submit
                </button>
        </form>
    </div>

</div>



<script>
    'use strict';
    
    
    let listItem = document.getElementById("list-item");
    const Student = {
        storeKey: 'STUDENT_DATA',

        data : [],

        
        load: function() {
            const jsonData = localStorage.getItem(this.storeKey);
            try {
                this.data = JSON.parse(jsonData);
            } catch (e) {
                alert("chua co thong tin");
            }
        },

        add: function(student){
            this.data.push(student)
        },

        edit:function(index, student){
            this.data[index] = student;
        },

        delete: function(index){
            this.data.splice(index,1);
        },

        save: function(){
            const jsonData = JSON.stringify(this.data);
            localStorage.setItem(this.storeKey, jsonData);
        },


        get list(){
            return this.data;
        }

    }

      Student.load();
      renderStudents();

    const formAuto = document.getElementById('main-form');
        formAuto.addEventListener('submit', function(e) {
            e.preventDefault();
        });

    function submitClickHandle() {
        
        var name = getInputValue("#name");
        var address = getInputValue("#address");
        var phone = getInputValue("#phone");
        var email = getInputValue("#email");
        var age = getInputValue("#age");
        var selected = changeSelectedValue(getInputValue("#selectOption"));

        Student.add({
            name: name,
            address: address,
            phone: phone,
            email: email,
            age: age,
            job: selected
            });

        Student.save();
        
        renderStudents();
    }

    function getInputValue(selector){
        var inputValue = document.querySelector(selector);
        return inputValue.value;
    }

    function renderStudents() {
        const Students = Student.list;

        for(let i = 0; i < Students.length; i++){

            console.log(Students.length);
            var opiskelija = Students[i];
            var itembox = document.createElement("div");
            itembox.setAttribute("class", "item__box");
            let divItem = document.createElement("div");
            let divIcon = document.createElement("div");
            divItem.setAttribute("class", "item__box--info");
            divIcon.setAttribute("class", "item__box--icon");
            divIcon.innerHTML = '<i id="delete" class="fas fa-trash-alt"></i><i id="edit" class="fas fa-edit"></i>';
            divItem.innerHTML = '<p>Name: '+ opiskelija.name +'</p><p>Address : '+ opiskelija.address +'</p><p>Phone : '+ opiskelija.phone +'</p><p>Email: '+ opiskelija.email +'</p><p>Age: '+ opiskelija.age +'</p><p>Job : '+ opiskelija.job +'</p>';
            itembox.appendChild(divItem);
            itembox.appendChild(divIcon);
            console.log(opiskelija.job);

        }

        listItem.appendChild(itembox);
    }


    function changeSelectedValue(getValue) {
        switch(getValue){
            case "1":
            return "Students";
            break;

            case "2":
            return "Software Developer";
            break;

            case "3":
            return "Web -fullstack developer";
            break;

            case "4":
            return "Sofware engineer";
            break;

            default:
            return "Not selected";
            break;
        }
    }

</script>
</body>
</html>